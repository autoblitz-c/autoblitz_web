<!DOCTYPE html>
<html lang="de">

<head>
    <title>Buchungsstatus überprüfen</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css" integrity="sha512-q3eWabyZPc1XTCmF+8/LuE1ozpg5xxn7iO89yfSOd5/oKvyqLngoNGsx8jq92Y8eXJ/IRxQbEC+FGSYxtk2oiw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="{{url_for('static', filename='book.css')}}">


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://smtpjs.com/v3/smtp.js">
    </script>


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>



    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>



</head>

<body class="body">
    {% if cookies_check() %}
    {# then user has already consented so no requirement for consent banner #}
    {% else %}
    {# show a cookie consent banner #}
    <div id="cookie-consent-container" class="cookie-banner fixed-bottom bg-dark text-white py-3">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h3 style="color:white"><i class='fas fa-cookie-bite' style='color:rgb(240,142,33)'></i> Drittanbieter-Cookies</h3>
                    <p class="mb-0" style="color:white;font-size: 14px;">Wir verwenden Cookies von Drittanbietern, um Inhalte und Anzeigen zu personalisieren und den Website-Verkehr zu analysieren.</p>
                    <a style="font-size: 14px;" href="/datenschutz">Mehr erfahren</a>
                </div>
                <div class="col-md-4 text-md-end">
                    <button id="cookie-consent" type="button" class="btn btn-outline-light btn-sm"
                        data-bs-dismiss="cookie-banner">Akzeptieren</button>

                </div>
            </div>
        </div>
    </div>

    <script>
        var fn = function () {
            document.cookie = "cookie_consent=true";
            document.getElementById('cookie-consent-container').hidden = true;
        };

        document.getElementById('cookie-consent').onclick = fn;

    </script>
    {% endif %}
    <div class="container-fullwidth m-0 p-0">



        <nav class="navbar navbar-expand-sm bg-light navbar-light   ">
            <div class="container-fluid">
                <a class="navbar-brand" ><img id="logo" style="position:relative;top:2%" alt="logo"
                        src="{{url_for('static', filename='autoblitz_logo-removebg.png')}}"></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapsibleNavbar">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="collapsibleNavbar">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" id="tab" href="/"><i id="tab" class="fa fa-home"></i></a>
                        </li>
                        <li class="nav-item dropdown">
                            <a id="tab" class="nav-link dropdown-toggle" href="#" role="button"
                                data-bs-toggle="dropdown">unsere Dienstleistungen</a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/taxi">Personenbeförderung</a></li>
                                <li><a class="dropdown-item" href="/ambulance">Krankentransport</a></li>

                            </ul>
                        </li>
                        <li class="nav-item">
                            <a id="tab" class="nav-link" href="/vacancy">Stellenangebote</a>
                        </li>
                        <li class=" nav-item">
                            <a id="tab" class="nav-link" href="/about_us">Über uns</a>
                        </li>



                        <li class="nav-item dropdown">
                            <a id="tab" class="nav-link dropdown-toggle" href="#" role="button"
                                data-bs-toggle="dropdown"><i id="tab" class="fa fa-address-book"></i></a>
                            <ul class="dropdown-menu">

                                <li><a class="dropdown-item" href="/contact_us" data-bs-toggle="tooltip"
                                        title="Mail uns" style="text-align:center">Kontaktieren Sie uns <i
                                            class="fa fa-envelope" aria-hidden="true"></i></a>
                                </li>
                                <li hidden><a class="dropdown-item" href="#" data-bs-toggle="tooltip" title="Help"
                                        style="text-align:center"> <i class="fa fa-question-circle fa-lg"
                                            aria-hidden="true"></i></a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown" style="background-color:rgb(240,142,33);border-radius: 25px;">
                            <a id="tab" class="nav-link dropdown-toggle" href="#" role="button"
                                data-bs-toggle="dropdown"><i id="tab" class="fa fa-shopping-cart"></i></a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" style="color:rgb(240,142,33)" >Buchungsstatus
                                        überprüfen
                                    </a></li>
                                <li><a class="dropdown-item" href="/cancel_booking">Buchung stornieren
                                    </a></li>

                            </ul>
                        </li>
                    </ul>


                </div>
            </div>
        </nav><br><br>
        <form id="ordering">
            <div style="display: flex; justify-content: center;">
                <input id="order" name="order" style="width:50%" class="form" type="text"
                    placeholder="Ihre Bestellnummer">
            </div><br>

            <div style="display: flex; justify-content: center;">
                <button type="button" class="btn btn-primary"
                    style="background-color:green;border-radius:15px;height:20%" onclick="check()">Buchungsstatus
                    überprüfen</button><br><br>
            </div>
        </form>
        <div style="display: flex; justify-content: center;">
            <table style="display: flex; justify-content: center;">

                <tr id="general" style="display:none">
                    <td style="background-color:rgb(16, 16, 52);border-top-left-radius: 25px;border-bottom-left-radius:25px; color:white">Buchungsstatus: </td>
                    <td id="bstatus" style="background-color:rgb(240,142,33);border-top-right-radius: 25px;border-bottom-right-radius:25px; color:white"></td>

                </tr>
                <tr id='driver_name' style="display:none">
                    <td style="background-color:rgb(16, 16, 52);border-top-left-radius: 25px;border-bottom-left-radius:25px; color:white">Name des Fahrers:
                    </td>
                    <td id="dnstatus" style="background-color:rgb(240,142,33);border-top-right-radius: 25px;border-bottom-right-radius:25px; color:white"></td>

                </tr>
                <tr id='driver_phone' style="display:none">
                    <td style="background-color:rgb(16, 16, 52);border-top-left-radius: 25px;border-bottom-left-radius:25px; color:white">Telefonnummer des
                        Fahrers: </td>
                    <td id="dpstatus" style="background-color:rgb(240,142,33);border-top-right-radius: 25px;border-bottom-right-radius:25px; color:white"></td>

                </tr>
                <tr id='vehicle_name' style="display:none">
                    <td style="background-color:rgb(16, 16, 52);border-top-left-radius: 25px;border-bottom-left-radius:25px; color:white">Automodell: </td>
                    <td id="vstatus" style="background-color:rgb(240,142,33);border-top-right-radius: 25px;border-bottom-right-radius:25px; color:white"></td>

                </tr>


            </table>
        </div>
        <div id="error_msg" style="display:none;justify-content:center"><p id="emsg" style="display:flex;justify-content:center;color:red"></p></div>
        <div id="loading_img" style="display:none;justify-content:center"><img style="width: 20%;"
                src="{{url_for('static', filename='loading.gif')}}" alt="loading"></div>



        <script>
            function check() {
                document.getElementById("error_msg").style.display = "none";
                document.getElementById("general").style.display = "none";
                document.getElementById("driver_name").style.display = "none";
                document.getElementById("driver_phone").style.display = "none";
                document.getElementById("vehicle_name").style.display = "none";
                document.getElementById("loading_img").style.display = "flex";
                var orderno = document.getElementById("order").value;

                if (orderno == "") {
                    alert("Bitte geben Sie Ihre Bestellnummer ein.");
                } else {
                    api_check();
                }
            }

            function api_check() {


                $.ajax({
                    type: "POST",
                    url: "/order",
                    data: JSON.stringify({ order: document.getElementById("order").value}),
                    contentType: "application/json",
                    dataType: "json",
                    success: function (response) {
                        if (response.status === "succeeded") {
                            document.getElementById("loading_img").style.display = "none";
                            $('#bstatus').text(response.message);
                            $('#dnstatus').text(response.drvName);
                            $('#dpstatus').text(response.drvPhone);
                            $('#vstatus').text(response.vehModel);
                            document.getElementById("general").style.display = "block";
                            document.getElementById("driver_name").style.display = "block";
                            document.getElementById("driver_phone").style.display = "block";
                            document.getElementById("vehicle_name").style.display = "block";

                        } 
                        else if (response.status === "error"){
                            document.getElementById("loading_img").style.display = "none";
                            $('#emsg').text(response.message);
                            document.getElementById("error_msg").style.display = "block";

                        }
                        else {
                            $('#bstatus').text(response.message);
                            document.getElementById("loading_img").style.display = "none";
                            document.getElementById("general").style.display = "block";
                        }
                    }
                });
            }



        </script>




        <div class="container-sm-fullwidth" style="position:relative;bottom:0vh;top:50vh">

            <footer class="text-center text-lg-start"
                style="background-color: rgb(240,142,33);border-top-left-radius:25px;border-top-right-radius:25px">
                <div class="container d-flex justify-content-center py-5">
                    <a type="button" class="btn btn-primary btn-lg btn-floating mx-2"
                        style="background-color: rgb(16, 16, 52); border-radius: 50px;"
                        href="https://www.facebook.com/autoblitz.koeln/?locale=de_D">
                        <i style="color:white" class="fa fa-facebook-f"></i>
                    </a>
                    <a type="button" class="btn btn-primary btn-lg btn-floating mx-2"
                        style="background-color: rgb(16, 16, 52);border-radius: 50px;"
                        href="https://www.youtube.com/@autoblitzcologne/featured?sub_confirmation=1">
                        <i style="color:white" class="fa fa-youtube"></i>
                    </a>
                    <a type="button" class="btn btn-primary btn-lg btn-floating mx-2"
                        style="background-color: rgb(16, 16, 52);border-radius: 50px;"
                        href="https://www.instagram.com/autoblitz_c/">
                        <i style="color:white" class="fa fa-instagram"></i>
                    </a>
                    <a type="button" class="btn btn-primary btn-lg btn-floating mx-2"
                        style="background-color: rgb(16, 16, 52);border-radius: 50px;"
                        href="https://twitter.com/intent/follow?screen_name=Autoblitz_C">
                        <i style="color:white" class="fa fa-twitter"></i>
                    </a>
                </div>
                <div class="container d-flex justify-content-center ">
                    <a id="datap" type="button" href="/datenschutz" target="_blank">Datenschutz</a>
                    <span class="vertical-line"></span>
                    <a id="datap" type="button" href="/impressum" target="_blank">Impressum</a>
                </div>

                <!-- Copyright -->
                <div class="text-center text-white p-3" style="background-color: rgba(0, 0, 0, 0.2);">
                    © 2023 Copyright:
                    <a class="text-white" href="mailto:kontakt@tm-marketingservice.de">TM-Marketing Service</a>
                </div>
                <!-- Copyright -->
            </footer>


        </div>